<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ูุธุงู ุงููููู ุงูุฐูู 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <div id="loginOverlay">
        <h2>๐ ูุธุงู ุงููููู ุงูุฐูู</h2>
        <p>ูุฑุฌู ุฅุฏุฎุงู ุฑูุฒ ุงูุฏุฎูู</p>
        <input type="password" id="pinInput" placeholder="ุงูุฑูุฒ" maxlength="4">
        <button onclick="checkPin()" style="margin-top: 20px; background: var(--accent-color); color: #000;">ุฏุฎูู</button>
    </div>

    <div id="tabHome" class="tab-content active">
        <div class="glass-panel">
            <div class="dashboard-stats">
                <div class="stat-box">
                    <h3 id="totalFamilies">0</h3>
                    <p>ุงูุนูุงุฆู</p>
                </div>
                <div class="stat-box">
                    <h3 id="totalIndividuals">0</h3>
                    <p>ุงูุฃูุฑุงุฏ</p>
                </div>
                <div class="stat-box">
                    <h3 id="dateToday">--</h3>
                    <p>ุงูุชุงุฑูุฎ</p>
                </div>
            </div>
        </div>

        <div class="glass-panel" id="printArea">
            <div class="print-header">
                <h1>ูุฒุงุฑุฉ ุงูุชุฌุงุฑุฉ - ูุตู ุชุฌููุฒ ูููู</h1>
                <p>ุชุงุฑูุฎ ุงูุทุจุงุนุฉ: <span id="printDate"></span></p>
            </div>

            <h2 style="text-align: center; margin-bottom: 20px;">ุจุทุงูุฉ ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ 2026</h2>
            
            <div class="form-grid">
                <div>
                    <label>ุฑูู ุงูุจุทุงูุฉ ุงูุชูููููุฉ</label>
                    <input type="text" id="cardNumber">
                </div>
                <div>
                    <label>ุงุณู ุฑุจ ุงูุฃุณุฑุฉ</label>
                    <input type="text" id="headName">
                </div>
                <div>
                    <label>ุนุฏุฏ ุงูุฃูุฑุงุฏ (ุงูููู)</label>
                    <input type="number" id="familyCount" value="0">
                </div>
                <div>
                    <label>ูุณุชุญููู</label>
                    <input type="number" id="eligibleCount" value="0">
                </div>
                <div>
                    <label>ูุญุฌูุจูู</label>
                    <input type="number" id="blockedCount" value="0">
                </div>
                <div>
                    <label>ุงุณู ุงููููู</label>
                    <input type="text" id="agentName" value="ุณุงุฌุฏุฉ ูุฑุฏู ุนูู">
                </div>
                <div class="full-width">
                    <label>ููุงุญุธุงุช ุงููููู</label>
                    <textarea id="notes" rows="2" placeholder="ููุงุญุธุงุช..."></textarea>
                </div>
            </div>

            <div class="table-container">
                <table id="rationTable">
                    <thead>
                        <tr>
                            <th style="width: 15%">ุงููุงุฏุฉ</th>
                            <th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th>
                            <th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            
            <div style="display: none; justify-content: space-between; margin-top: 30px;" class="print-only">
                <div>ุชูููุน ุงููููู</div>
                <div>ุชูููุน ุงููุณุชูู</div>
            </div>
        </div>

        <div class="actions">
            <button class="btn-new" onclick="clearForm()">๐ ุฌุฏูุฏ</button>
            <button class="btn-save" onclick="saveData()">๐พ ุญูุธ (ุณุญุงุจู)</button>
            <button class="btn-print" onclick="printReceipt()">๐จ๏ธ ุทุจุงุนุฉ</button>
            <button class="btn-del" onclick="deleteCurrent()">๐๏ธ ุญุฐู</button>
        </div>
    </div>

    <div id="tabSearch" class="tab-content">
        <div class="glass-panel">
            <h2 style="text-align: center;">๐ ุณุฌู ุงูุนูุงุฆู</h2>
            <div class="search-area">
                <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุงูุฑูู..." style="width: 100%; text-align: center;">
            </div>
            <div id="searchResults" class="search-results" style="display: block; position: static;"></div>
        </div>
    </div>

    <div id="tabSettings" class="tab-content">
        <div class="glass-panel" id="backupControls" style="text-align: center;">
            <h4 style="margin-top: 0;">๐๏ธ ุฃุฏูุงุช ุงููุธุงู</h4>
            <p>ุญุงูุฉ ุงูุงุชุตุงู: <span id="connectionStatus" style="color: var(--success-color);">ูุชุตู ุจู Firestore โ</span></p>
            <hr style="border-color: var(--glass-border);">
            
            <button class="btn-install" id="installBtn" onclick="installApp()">๐ฒ ุชุซุจูุช ุงูุชุทุจูู</button>
            
            <div style="margin-top: 20px;">
                <button class="btn-backup" onclick="exportData()">โฌ๏ธ ุชุตุฏูุฑ ูุญูู (JSON)</button>
                <br><br>
                <button class="btn-backup" onclick="document.getElementById('fileInput').click()">โฌ๏ธ ุงุณุชูุฑุงุฏ ูุญูู</button>
                <input type="file" id="fileInput" style="display: none" onchange="importData(this)">
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <button class="nav-btn active" onclick="switchTab('tabHome', this)">
            <span>๐</span> ุงูุฑุฆูุณูุฉ
        </button>
        <button class="nav-btn" onclick="switchTab('tabSearch', this)">
            <span>๐</span> ุงูุจุญุซ
        </button>
        <button class="nav-btn" onclick="switchTab('tabSettings', this)">
            <span>โ๏ธ</span> ุงูุฅุนุฏุงุฏุงุช
        </button>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
